# Backend Implementation Plan â€” Smart Canteen Admin System

This plan outlines the steps to build a robust Flask backend for the Smart Canteen Admin System, following the "Intensive Backend Master Plan".

## User Review Required

> [!IMPORTANT]
> The plan specifies using PostgreSQL. Please ensure you have a PostgreSQL instance available and provide the connection details (or I can help you set it up locally if needed).
> 
> [!NOTE]
> I will be creating a new `backend/` directory at the root of the project to house the Flask application.

## Proposed Changes

### [NEW] Backend Foundation

Summary: Setting up the core Flask application structure.

#### [NEW] [app.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/app.py)
Flask app factory and extension initialization.

#### [NEW] [config.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/config.py)
Environment-based configuration (Development, Production).

#### [NEW] [extensions.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/extensions.py)
Initialization of SQLAlchemy, JWTManager, CORS, and Migrations.

#### [NEW] [requirements.txt](file:///c:/Users/Admin/Downloads/_Admin_/backend/requirements.txt)
Python dependencies as listed in the master plan.

#### [NEW] [.env](file:///c:/Users/Admin/Downloads/_Admin_/backend/.env)
Environment variables for sensitive data (DB URI, JWT Secret).

### [NEW] Database Models

Summary: Implementing the schema in SQLAlchemy models.

#### [NEW] [models/user.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/models/user.py)
User model with simplified roles: `admin`, `user`, `employee`, and `staff`.

#### [NEW] [models/food.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/models/food.py)
Food item details and nutrition info.

#### [NEW] [models/inventory.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/models/inventory.py)
Stock management linked to food items.

#### [NEW] [models/order.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/models/order.py), [models/order_item.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/models/order_item.py)
Order tracking and detailed line items.

#### [NEW] [models/audit_log.py](file:///c:/Users/Admin/Downloads/_Admin_/backend/models/audit_log.py)
Admin action logging for security auditing.

#### [NEW] AI Models
`ai_log.py`, `training_history.py` for model monitoring.

## Verification Plan

### Automated Tests
- Implementation of unit tests for models using `pytest`.
- Integration tests for API endpoints using Flask's test client.

### Manual Verification
- Testing endpoints using Postman or `curl`.
- Verifying database migrations using Flask-Migrate.
