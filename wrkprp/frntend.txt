# ğŸ—ï¸ Admin System â€” Complete Structure & Page-by-Page Creation Plan

---

## ğŸ“ Complete Folder Structure

```
admin/
â”œâ”€â”€ pages/
â”‚    â”œâ”€â”€ dashboard.html
â”‚    â”œâ”€â”€ food-management.html
â”‚    â”œâ”€â”€ inventory.html
â”‚    â”œâ”€â”€ orders.html
â”‚    â”œâ”€â”€ users.html
â”‚    â”œâ”€â”€ analytics.html
â”‚    â”œâ”€â”€ ai-monitoring.html
â”‚    â”œâ”€â”€ reports.html
â”‚    â””â”€â”€ audit-logs.html
â”œâ”€â”€ assets/
â”‚    â”œâ”€â”€ css/
â”‚    â”‚    â”œâ”€â”€ admin.css          â† global styles, tokens, glassmorphism
â”‚    â”‚    â””â”€â”€ components.css     â† cards, tables, modals, toasts
â”‚    â”œâ”€â”€ js/
â”‚    â”‚    â”œâ”€â”€ admin.js           â† sidebar, auth guard, role check
â”‚    â”‚    â”œâ”€â”€ components.js      â† reusable toast, modal, loader
â”‚    â”‚    â””â”€â”€ charts.js          â† Chart.js base config
â”‚    â””â”€â”€ icons/                  â† SVG icon set
â”œâ”€â”€ api/
â”‚    â”œâ”€â”€ base.js                 â† axios/fetch instance + token injection
â”‚    â”œâ”€â”€ adminApi.js             â† overview, audit
â”‚    â”œâ”€â”€ foodApi.js              â† food CRUD
â”‚    â”œâ”€â”€ inventoryApi.js
â”‚    â”œâ”€â”€ orderApi.js
â”‚    â”œâ”€â”€ userApi.js
â”‚    â”œâ”€â”€ analyticsApi.js
â”‚    â”œâ”€â”€ aiApi.js
â”‚    â””â”€â”€ reportsApi.js
â””â”€â”€ auth/
     â””â”€â”€ authGuard.js            â† redirect if not logged in / wrong role
```

---

## ğŸ—‚ï¸ Page-by-Page Creation Order & Blueprint

Build in this exact order â€” each page builds on the last.

---

### âœ… PHASE 1 â€” Foundation (Do this before any page)

Before touching any HTML, set up:

**`admin.css`** â€” Design tokens
```css
--primary: #6C63FF;
--bg: #0f0f1a;
--glass: rgba(255,255,255,0.05);
--border: rgba(255,255,255,0.1);
--success: #00e676;
--danger: #ff5252;
```

**`base.js`** â€” API layer base
```js
const API = axios.create({ baseURL: '/api/admin' });
API.interceptors.request.use(config => {
  config.headers.Authorization = `Bearer ${localStorage.getItem('token')}`;
  return config;
});
```

**`admin.js`** â€” Sidebar + auth guard (runs on every page)

**`components.js`** â€” Toast, confirm modal, loader spinner (reused everywhere)

---

### ğŸ“„ PAGE 1 â€” Dashboard (`dashboard.html`)

**Build order inside the page:**

1. Sidebar (include via JS or iframe)
2. Top header bar (admin name, role badge, logout)
3. Stats row â€” 4 KPI cards:
   - Total Revenue
   - Today's Orders
   - Active Users
   - Low Stock Alerts (clickable â†’ inventory page)
4. Charts row:
   - Left: Risk Distribution (Doughnut chart)
   - Right: Sales This Week (Bar chart)
5. Bottom: Top 5 Selling Items table

**API calls:**
```
GET /api/admin/overview  â†’  populates all cards + charts
```

**Key interactions:** Low stock badge auto-highlights red, clicking it navigates to inventory.

---

### ğŸ“„ PAGE 2 â€” Food Management (`food-management.html`)

**Build order:**

1. Header + "Add Food" button (opens modal)
2. Search bar + Category filter dropdown
3. Food table:

| Name | Category | Calories | Sugar | Protein | Stock | Status | Actions |
|------|----------|----------|-------|---------|-------|--------|---------|

4. Add/Edit modal (form with all fields + image URL input)
5. Delete confirmation modal
6. Availability toggle (switches status in-place)

**API calls:**
```
GET    /api/admin/foods
POST   /api/admin/foods
PUT    /api/admin/foods/:id
DELETE /api/admin/foods/:id
```

**Key rule:** Delete must trigger confirmation modal â†’ on confirm, removes from recommendation engine too.

---

### ğŸ“„ PAGE 3 â€” Inventory (`inventory.html`)

**Build order:**

1. Summary strip: Total Items / Low Stock Count / Out of Stock Count
2. Stock table:

| Food Name | Current Stock | Reorder Level | Status Badge | Update |

3. Inline edit â€” click quantity â†’ editable input â†’ save button appears
4. Status badge logic:
   - `>= reorder` â†’ ğŸŸ¢ Healthy
   - `< reorder` â†’ ğŸŸ¡ Low
   - `0` â†’ ğŸ”´ Out of Stock

**API calls:**
```
GET /api/admin/inventory
PUT /api/admin/inventory/:food_id
```

---

### ğŸ“„ PAGE 4 â€” Orders (`orders.html`)

**Build order:**

1. Filter tabs: All / Pending / Completed / Cancelled
2. Orders table:

| Order ID | User | Items (summary) | Total | Status | Date | Action |

3. Status dropdown inline (change Pending â†’ Completed etc.)
4. Expandable row â†’ shows full item list

**API calls:**
```
GET /api/admin/orders?status=pending
PUT /api/admin/orders/:id/status
```

---

### ğŸ“„ PAGE 5 â€” Users (`users.html`)

**Build order:**

1. Search + Role filter
2. Users table:

| Name | Email | Role | Health Risk | Status | Actions |

3. View Health Summary modal (disease tags, risk score)
4. Deactivate toggle (with confirmation)
5. Role change dropdown (SUPER_ADMIN only â€” hide for others)

**API calls:**
```
GET /api/admin/users
PUT /api/admin/users/:id
```

**RBAC rule:** ANALYST sees this page read-only. MANAGER can deactivate. SUPER_ADMIN can change roles.

---

### ğŸ“„ PAGE 6 â€” Analytics (`analytics.html`)

**Build order:**

1. Date range picker (filter all charts)
2. Row 1 charts:
   - Sales Over Time (Line chart)
   - Most Popular Foods (Horizontal Bar)
3. Row 2 charts:
   - Disease Distribution across users (Pie)
   - Risk Level Trends over time (Area chart)
4. Insight summary cards below charts (auto-generated text summaries)

**API calls:**
```
GET /api/admin/analytics/sales?from=&to=
GET /api/admin/analytics/users
GET /api/admin/analytics/risk
```

---

### ğŸ“„ PAGE 7 â€” AI Monitoring (`ai-monitoring.html`)

**Build order:**

1. Model Status card (Active / Degraded / Retraining)
2. Key metrics row:
   - Accuracy %
   - Last Trained date
   - Total Predictions made
3. Feature Importance bar chart (what factors drive recommendations)
4. Recommendation Logs table (user, recommended food, reason, timestamp)
5. "Retrain Model" button â†’ shows progress bar â†’ shows result toast

**API calls:**
```
GET  /api/admin/ai/status
GET  /api/admin/ai/logs
POST /api/admin/ai/retrain
```

---

### ğŸ“„ PAGE 8 â€” Reports (`reports.html`)

**Build order:**

1. Report type cards (Sales, Health Trends, Inventory)
2. Each card has: date range picker + Export CSV button + Preview table
3. Preview loads top 10 rows before full export
4. Download triggers file save

**API calls:**
```
GET /api/admin/export/sales?from=&to=    â†’ returns CSV blob
GET /api/admin/export/users
GET /api/admin/export/inventory
```

---

### ğŸ“„ PAGE 9 â€” Audit Logs (`audit-logs.html`)

**Build order:**

1. Filter bar: by admin user, action type, date range
2. Logs table:

| Time | Admin | Action | Target | IP Address | Details |

3. Expandable row â†’ shows full payload snapshot (JSON viewer)
4. Read-only â€” no edits allowed on this page

**API calls:**
```
GET /api/admin/audit?admin_id=&action=&from=&to=
```

---

## ğŸ” Build Sequence Summary

```
Phase 1:  CSS tokens + base.js + admin.js + components.js   â† FOUNDATION
Page 1:   Dashboard          â† proves API connection works
Page 2:   Food Management    â† core CRUD, most complex
Page 3:   Inventory          â† depends on food data
Page 4:   Orders             â† independent, easy win
Page 5:   Users              â† RBAC critical
Page 6:   Analytics          â† needs pages 1-5 data to exist
Page 7:   AI Monitoring      â† needs food + user data
Page 8:   Reports            â† wraps everything
Page 9:   Audit Logs         â† final layer, logs all above
```

---

## âš¡ Cross-Page Rules (Apply Everywhere)

Every single page must have these baked in before you call it done:

- **Auth guard** â€” redirect to login if no valid JWT
- **Role visibility** â€” hide buttons/pages based on role
- **Loading skeleton** â€” shown while API fetches
- **Error state** â€” shown if API fails (not a blank page)
- **Success/fail toast** â€” every write operation
- **Confirm modal** â€” every delete or destructive action
- **Audit trigger** â€” every write operation calls audit log endpoint

