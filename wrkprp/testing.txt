ğŸ§ª PROMPT 1 â€” COMPLETE TESTING PROMPT

You are a senior QA engineer testing a full-stack
web application called HealthBite Smart Canteen.

The application has TWO sides:
  USER SIDE  â†’ FastAPI backend + HTML/JS frontend
  ADMIN SIDE â†’ FastAPI backend + HTML/JS frontend
  ONE shared PostgreSQL database
  ONE server running on port 8000

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
YOUR JOB: Test EVERY page, EVERY function,
EVERY API endpoint, and report EXACTLY what
works, what fails, and what is missing.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECTION 1 â€” BACKEND API TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

For each test below:
  Run the request
  Record: PASS âœ… or FAIL âŒ
  If FAIL: record exact error message
  If FAIL: record HTTP status code received

Use this base URL: http://localhost:8000

â”€â”€ USER AUTH ENDPOINTS â”€â”€

TEST U-AUTH-1:
  POST /api/auth/register
  Body: {
    "name": "Test User",
    "email": "testuser@healthbite.com",
    "password": "Test@1234",
    "role": "USER"
  }
  Expected: 200, returns token
  Check:
    â–¡ Response has "token" field
    â–¡ Response has "name" field
    â–¡ Response has "role" = "USER"
    â–¡ User exists in database after call

TEST U-AUTH-2:
  POST /api/auth/login
  Body: {
    "email": "testuser@healthbite.com",
    "password": "Test@1234",
    "role": "USER"
  }
  Expected: 200, returns token
  Check:
    â–¡ Token returned
    â–¡ Role is USER
    â–¡ Save this token as USER_TOKEN
      for all subsequent user tests

TEST U-AUTH-3:
  POST /api/auth/login
  Body: { wrong password }
  Expected: 401
  Check:
    â–¡ Returns 401 not 500
    â–¡ Returns clear error message

TEST U-AUTH-4:
  POST /api/auth/login
  Body: {
    "email": "admin@healthbite.com",
    "password": "Admin@123",
    "role": "SUPER_ADMIN"
  }
  Expected: 200, returns token
  Check:
    â–¡ Token returned
    â–¡ Role is SUPER_ADMIN
    â–¡ Save this token as ADMIN_TOKEN
      for all admin tests

TEST U-AUTH-5:
  POST /api/auth/register
  Body: { duplicate email from TEST U-AUTH-1 }
  Expected: 400
  Check: â–¡ Returns 400, not 500

TEST U-AUTH-6:
  POST /api/auth/register
  Body: { weak password: "abc" }
  Expected: 400
  Check: â–¡ Returns password validation error

â”€â”€ HEALTH PROFILE ENDPOINTS â”€â”€

TEST U-HEALTH-1:
  GET /api/health/check
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns has_profile boolean
    â–¡ Returns user name

TEST U-HEALTH-2:
  POST /api/health/profile
  Header: Authorization: Bearer {USER_TOKEN}
  Body: {
    "age": 28,
    "height_cm": 170,
    "weight_kg": 75,
    "disease": ["Diabetes", "Hypertension"],
    "allergies": "None"
  }
  Expected: 200
  Check:
    â–¡ Profile saved successfully
    â–¡ BMI calculated and returned
    â–¡ Disease list saved correctly
    â–¡ Check users table:
        conditions = '["Diabetes","Hypertension"]'
        risk_level = 'moderate' or 'high'
        risk_score > 0

TEST U-HEALTH-3:
  GET /api/health/profile
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns saved profile data
    â–¡ disease is a list not string
    â–¡ BMI is calculated correctly

TEST U-HEALTH-4:
  POST /api/health/daily-log
  Header: Authorization: Bearer {USER_TOKEN}
  Body: { "water_intake_ml": 500,
          "steps": 3000, "mood": "Happy" }
  Expected: 200
  Check: â–¡ Log saved for today

TEST U-HEALTH-5:
  GET /api/health/daily-log
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check: â–¡ Returns today's log values

â”€â”€ MENU ENDPOINTS â”€â”€

TEST U-MENU-1:
  GET /api/menu/intelligent
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns list of food items
    â–¡ Items come from DATABASE
      (not hardcoded â€” verify by
       checking food_items table count matches)
    â–¡ Each item has: id, name, price,
        calories, sugar, match_score
    â–¡ Items sorted by match_score desc
    â–¡ Only available=True items returned
    â–¡ Only stock > 0 items returned
    â–¡ Diabetic user: high-sugar foods
        have LOWER match_score
    â–¡ Returns at least 5 items

TEST U-MENU-2:
  POST /api/menu/order
  Header: Authorization: Bearer {USER_TOKEN}
  Body: {
    "items": [
      {"food_id": 1, "qty": 2},
      {"food_id": 2, "qty": 1}
    ],
    "payment_method": "cash",
    "delivery_type": "pickup"
  }
  Expected: 200
  Check:
    â–¡ Order created in orders table
    â–¡ order_items rows created (2 rows)
    â–¡ Each order_item has correct:
        food_name, qty, unit_price, subtotal
    â–¡ Order status = 'pending'
    â–¡ Order total = sum of subtotals
    â–¡ inventory.current_stock REDUCED by qty
    â–¡ health_flag = True on high-sugar item
        (because user has Diabetes)
    â–¡ Save order_id for later tests

TEST U-MENU-3:
  POST /api/menu/order
  Header: Authorization: Bearer {USER_TOKEN}
  Body: { items: [{ food_id: 9999, qty: 1 }] }
  Expected: 404 or 422
  Check: â–¡ Returns error, not 500

TEST U-MENU-4:
  POST /api/menu/order
  Body: { items: [{ food_id: 1, qty: 99999 }] }
  Expected: 422
  Check: â–¡ "Out of stock" error returned

TEST U-MENU-5:
  GET /api/menu/history
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns list of user's orders
    â–¡ Order from TEST U-MENU-2 appears
    â–¡ Each order has status field
    â–¡ Each order has items breakdown

â”€â”€ ANALYTICS ENDPOINTS â”€â”€

TEST U-ANALYTICS-1:
  GET /api/analytics/nutrition?days=7
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns daily_data array
    â–¡ Data based on REAL orders
      (NOT random numbers)
    â–¡ Verify: place another order, call again,
        numbers change

TEST U-ANALYTICS-2:
  GET /api/analytics/risk
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns risk list based on
      user's REAL conditions
    â–¡ Diabetes appears (user has it)
    â–¡ NOT hardcoded static data

TEST U-ANALYTICS-3:
  GET /api/analytics/prediction
  Expected: 200
  Check: â–¡ Returns predictions based on
           real order history

TEST U-ANALYTICS-4:
  GET /api/analytics/timeline
  Expected: 200
  Check: â–¡ Returns timeline based on
           real order data

â”€â”€ CHATBOT ENDPOINT â”€â”€

TEST U-CHATBOT-1:
  POST /api/chatbot/query
  Header: Authorization: Bearer {USER_TOKEN}
  Body: {
    "message": "what should I eat for lunch?",
    "context": {}
  }
  Expected: 200
  Check:
    â–¡ Returns response text
    â–¡ Response mentions foods available
        in the DATABASE
    â–¡ Considers user's Diabetes condition
    â–¡ Does NOT mention items that are
        unavailable or out of stock
    â–¡ AiRecommendationLog row created

TEST U-CHATBOT-2:
  POST /api/chatbot/query
  Body: { "message": "is chocolate cake safe?" }
  Expected: 200
  Check:
    â–¡ Response warns about sugar
      (user has Diabetes)
    â–¡ Response is personalized

â”€â”€ ADMIN DASHBOARD ENDPOINTS â”€â”€

TEST A-DASH-1:
  GET /api/admin/overview
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ revenue.value reflects real orders
    â–¡ orders.value reflects real order count
    â–¡ orders.pending > 0
      (from TEST U-MENU-2)
    â–¡ users.value reflects real user count
    â–¡ lowStock.value is a number

TEST A-DASH-2:
  GET /api/admin/overview
  Header: Authorization: Bearer {USER_TOKEN}
  Expected: 403
  Check: â–¡ Regular user CANNOT access admin

TEST A-DASH-3:
  GET /api/admin/analytics/orders-by-hour-today
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns hours array
    â–¡ Returns counts array
    â–¡ Current hour has a count > 0
      (placed order earlier today)

TEST A-DASH-4:
  GET /api/admin/analytics/sales?period=7d
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns labels, revenue, orders arrays
    â–¡ All same length
    â–¡ No nulls in arrays

TEST A-DASH-5:
  GET /api/admin/analytics/top-items
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns items array
    â–¡ Max 5 items
    â–¡ Each has rank, name, sold, share

TEST A-DASH-6:
  GET /api/admin/alerts
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns alerts array
    â–¡ Each alert has type + message

â”€â”€ ADMIN FOOD ENDPOINTS â”€â”€

TEST A-FOOD-1:
  GET /api/admin/foods
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns all 30 food items
    â–¡ Each has: id, name, category,
        calories, available, stock info

TEST A-FOOD-2:
  POST /api/admin/foods
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Body: {
    "name": "Test Salad Bowl",
    "category": "Healthy",
    "calories": 250,
    "sugar": 3,
    "protein": 12,
    "fat": 5,
    "price": 150,
    "stock": 50,
    "available": true
  }
  Expected: 201
  Check:
    â–¡ Food created in food_items table
    â–¡ Inventory row created (stock=50)
    â–¡ Audit log written
    â–¡ Save new_food_id for next tests

TEST A-FOOD-3:
  GET /api/menu/intelligent
  Header: Authorization: Bearer {USER_TOKEN}
  Check:
    â–¡ "Test Salad Bowl" now appears
      in user menu (live sync verified)

TEST A-FOOD-4:
  PUT /api/admin/foods/{new_food_id}
  Body: { "calories": 260, "price": 160 }
  Expected: 200
  Check:
    â–¡ calories updated to 260
    â–¡ price updated to 160
    â–¡ Other fields unchanged
    â–¡ Audit log written with before/after

TEST A-FOOD-5:
  PUT /api/admin/foods/{new_food_id}/availability
  Body: { "available": false }
  Expected: 200
  Check:
    â–¡ available = false in database
    â–¡ GET /api/menu/intelligent:
        "Test Salad Bowl" GONE from user menu

TEST A-FOOD-6:
  POST /api/admin/foods
  Body: { "name": "Test Salad Bowl", ... }
  Expected: 409
  Check: â–¡ Duplicate name rejected

TEST A-FOOD-7:
  DELETE /api/admin/foods/{new_food_id}
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Food deleted from food_items
    â–¡ Inventory row deleted (cascade)
    â–¡ GET /api/menu/intelligent:
        "Test Salad Bowl" gone forever

â”€â”€ ADMIN INVENTORY ENDPOINTS â”€â”€

TEST A-INV-1:
  GET /api/admin/inventory
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns summary + items
    â–¡ Summary has total, lowStock, outOfStock
    â–¡ Items sorted by stock ascending
    â–¡ Each item has status badge value:
        Healthy / Low / Out of Stock

TEST A-INV-2:
  PUT /api/admin/inventory/{food_id_1}
  Body: { "quantity": 5 }
  Expected: 200
  Check:
    â–¡ current_stock updated to 5
    â–¡ Status changes to 'Low Stock'
    â–¡ Audit log written
    â–¡ GET /api/admin/inventory:
        lowStock count incremented

TEST A-INV-3:
  PUT /api/admin/inventory/{food_id_1}
  Body: { "quantity": -5 }
  Expected: 422
  Check: â–¡ Negative stock rejected

â”€â”€ ADMIN ORDER ENDPOINTS â”€â”€

TEST A-ORD-1:
  GET /api/admin/orders
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns summary + orders array
    â–¡ Summary has: total, pending,
        completed, cancelled
    â–¡ Order from TEST U-MENU-2 visible
    â–¡ Order shows customer name
    â–¡ Order shows item breakdown
    â–¡ health_flag items marked

TEST A-ORD-2:
  GET /api/admin/orders?status=pending
  Expected: 200
  Check:
    â–¡ Only pending orders returned
    â–¡ Summary still shows all 4 counts

TEST A-ORD-3:
  PUT /api/admin/orders/{order_id}/status
  Body: { "status": "completed" }
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Order status = 'completed' in DB
    â–¡ Audit log written
    â–¡ GET /api/menu/history (user):
        Order now shows as 'completed'
        (cross-system sync verified)

TEST A-ORD-4:
  PUT /api/admin/orders/{order_id}/status
  Body: { "status": "pending" }
  Expected: 422
  Check: â–¡ Cannot change completed â†’ pending

â”€â”€ ADMIN USER ENDPOINTS â”€â”€

TEST A-USR-1:
  GET /api/admin/users
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ Returns summary + users
    â–¡ Test user from TEST U-AUTH-1 appears
    â–¡ User has conditions:
        ["Diabetes", "Hypertension"]
    â–¡ User has risk_level = 'moderate'/'high'
    â–¡ User has order_stats
    â–¡ summary.highRisk > 0

TEST A-USR-2:
  PUT /api/admin/users/{test_user_id}
  Body: { "active": false }
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 200
  Check:
    â–¡ User status = 'inactive' in DB
    â–¡ POST /api/auth/login with that user:
        Returns 401 or 403
        (deactivated user cannot login)

TEST A-USR-3:
  PUT /api/admin/users/{test_user_id}
  Body: { "active": true }
  Expected: 200
  Check: â–¡ User reactivated, can login again

TEST A-USR-4:
  PUT /api/admin/users/{test_user_id}
  Body: { "role": "ANALYST" }
  Expected: 200 (from SUPER_ADMIN token)
  Check:
    â–¡ Role updated
    â–¡ User can now access
        /api/admin/* endpoints

TEST A-USR-5:
  PUT /api/admin/users/{admin_user_id}
  Body: { "active": false }
  (Try to deactivate last SUPER_ADMIN)
  Expected: 422
  Check: â–¡ Last SUPER_ADMIN protected

â”€â”€ ADMIN ANALYTICS ENDPOINTS â”€â”€

For all analytics tests:
  Use: Authorization: Bearer {ADMIN_TOKEN}
  Use: ?from=2024-01-01&to=2025-12-31

TEST A-ANA-1: GET /api/admin/analytics/summary
  Check: â–¡ All 4 KPIs present with change %

TEST A-ANA-2: GET /api/admin/analytics/revenue-by-category
  Check:
    â–¡ Returns all 5 categories
    â–¡ Even if a category has 0 revenue

TEST A-ANA-3: GET /api/admin/analytics/popular-foods
  Check:
    â–¡ Max 10 foods
    â–¡ Ordered by count descending

TEST A-ANA-4: GET /api/admin/analytics/category-heatmap
  Check:
    â–¡ Returns 7 days (Mon-Sun)
    â–¡ Returns 5 categories
    â–¡ Returns 5Ã—7 data matrix

TEST A-ANA-5: GET /api/admin/analytics/disease-distribution
  Check:
    â–¡ Diabetes appears (we set it)
    â–¡ Hypertension appears
    â–¡ Returns counts per disease

TEST A-ANA-6: GET /api/admin/analytics/risk-trends
  Check:
    â–¡ Returns labels, low, moderate, high
    â–¡ All same length

TEST A-ANA-7: GET /api/admin/analytics/peak-hours
  Check:
    â–¡ Returns exactly 24 hours
    â–¡ Returns exactly 24 counts

TEST A-ANA-8: GET /api/admin/analytics/top-spenders
  Check:
    â–¡ Max 5 users
    â–¡ Each has rank, name, total

TEST A-ANA-9: GET /api/admin/analytics/ai-impact
  Check:
    â–¡ Returns served, accepted,
        acceptance_rate, health_improvement

â”€â”€ ADMIN AI MONITOR ENDPOINTS â”€â”€

TEST A-AI-1: GET /api/admin/ai/status
  Check:
    â–¡ Returns status field
    â–¡ Returns metrics object
    â–¡ Does not crash if no model trained yet

TEST A-AI-2: GET /api/admin/ai/features
  Check:
    â–¡ Returns features list
    â–¡ Max 8 features
    â–¡ Each has name + importance

TEST A-AI-3: GET /api/admin/ai/logs
  Check:
    â–¡ Returns paginated logs
    â–¡ Logs from chatbot queries appear
    â–¡ Each log has: user_name, food_name,
        confidence, user_action

TEST A-AI-4: GET /api/admin/ai/training-history
  Check: â–¡ Returns history array (can be empty)

TEST A-AI-5:
  POST /api/admin/ai/retrain
  Header: Authorization: Bearer {ADMIN_TOKEN}
  Expected: 202
  Check:
    â–¡ Returns 202 (not 200)
    â–¡ Returns { status: "retraining" }
    â–¡ GET /api/admin/ai/status immediately:
        status = "retraining"
    â–¡ Wait 35 seconds
    â–¡ GET /api/admin/ai/status again:
        status = "active"
    â–¡ Training history has new entry

TEST A-AI-6:
  POST /api/admin/ai/retrain again
  Expected: 409
  Check: â–¡ Cannot retrain while retraining

â”€â”€ ADMIN REPORT ENDPOINTS â”€â”€

TEST A-RPT-1:
  GET /api/admin/export/sales/preview
  ?from=2024-01-01&to=2025-12-31
  Check:
    â–¡ Returns columns array
    â–¡ Returns rows (max 10)
    â–¡ Returns total_rows count

TEST A-RPT-2:
  GET /api/admin/export/sales?format=csv
  Check:
    â–¡ Response Content-Type is text/csv
    â–¡ Content-Disposition has filename
    â–¡ CSV content is valid

TEST A-RPT-3:
  GET /api/admin/export/sales?format=pdf
  Check:
    â–¡ Response Content-Type is application/pdf
    â–¡ Content is valid PDF bytes

TEST A-RPT-4:
  GET /api/admin/export/health/preview
  ?anonymize=true
  Check:
    â–¡ Names show as "Anonymous"
    â–¡ Emails masked

TEST A-RPT-5:
  GET /api/admin/export/inventory
  Check: â–¡ CSV download with all food items

â”€â”€ ADMIN AUDIT ENDPOINTS â”€â”€

TEST A-AUD-1:
  GET /api/admin/audit/summary
  Check:
    â–¡ total_actions > 0
      (we performed many actions above)
    â–¡ today_actions > 0
    â–¡ last_action_at has value

TEST A-AUD-2:
  GET /api/admin/audit/admins
  Check:
    â–¡ Admin user appears in list
    â–¡ Role shown correctly

TEST A-AUD-3:
  GET /api/admin/audit
  Check:
    â–¡ Returns paginated logs
    â–¡ All previous test actions appear:
        LOGIN, CREATE, UPDATE, DELETE,
        STATUS_CHANGE, EXPORT actions logged
    â–¡ Each has: timestamp, admin_name,
        action_type, target_table,
        ip_address, summary

TEST A-AUD-4:
  GET /api/admin/audit?action_type=CREATE
  Check: â–¡ Only CREATE actions returned

TEST A-AUD-5:
  GET /api/admin/audit?search=food
  Check: â–¡ Only food-related logs returned

TEST A-AUD-6:
  GET /api/admin/audit?page=1&per_page=5
  Check:
    â–¡ Returns exactly 5 logs
    â–¡ Pagination meta correct

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECTION 2 â€” FRONTEND PAGE TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

For each page test:
  Open the page in browser
  Open DevTools (F12) â†’ Console tab
  Check for red errors
  Test every interactive element

â”€â”€ USER FRONTEND PAGES â”€â”€

PAGE TEST U-P1: index.html (Login/Register)
  â–¡ Page loads without console errors
  â–¡ Login tab shows login form
  â–¡ Register tab shows register form
  â–¡ Login with wrong password:
      Shows error message (not alert())
      Page does NOT redirect
  â–¡ Login with correct USER credentials:
      Redirects to health.html (no profile)
      OR user.html (has profile)
  â–¡ Login with ADMIN credentials:
      Redirects to admin/pages/dashboard.html
      Stores 'admin_token' in localStorage
      NOT 'token'
  â–¡ Register with weak password:
      Shows validation error immediately
  â–¡ Register successfully:
      Redirects to health.html
  â–¡ Logout clears ALL localStorage keys

PAGE TEST U-P2: health.html (Health Profile Setup)
  â–¡ Page loads without console errors
  â–¡ All form fields visible
  â–¡ Disease checkboxes work
  â–¡ BMI auto-calculated on height/weight input
  â–¡ Form validates before submit
  â–¡ Submit saves profile
  â–¡ After save: redirects to user.html
  â–¡ If revisit with existing profile:
      Form pre-filled with existing data

PAGE TEST U-P3: user.html (Dashboard)
  â–¡ Page loads without console errors
  â–¡ User name shows in header
  â–¡ Stats show real values (not 0 or undefined)
  â–¡ Quick links work
  â–¡ Logout button works

PAGE TEST U-P4: full-menu.html (Food Menu)
  â–¡ Page loads without console errors
  â–¡ Foods load from DATABASE (not hardcoded)
  â–¡ Each food card shows:
      Name, price, calories, match score, tag
  â–¡ Match scores differ based on conditions
  â–¡ High-sugar foods have LOW score for diabetics
  â–¡ "Add to Cart" works
  â–¡ Cart total updates correctly
  â–¡ Cart quantity +/- works
  â–¡ Place Order button works:
      Shows confirmation
      Order created in DB
      Stock reduced in DB
  â–¡ Health warning shows if flagged item in cart
  â–¡ Out of stock items don't appear
  â–¡ Category filter works
  â–¡ Search filter works

PAGE TEST U-P5: orders.html (Order History)
  â–¡ Page loads without console errors
  â–¡ Orders load from database
  â–¡ Each order shows:
      Order number, date, status, total
  â–¡ Order placed in TEST U-MENU-2 visible
  â–¡ Status badge correct color
  â–¡ If admin marked completed:
      Shows "Completed" here too
  â–¡ Order item breakdown shows
  â–¡ Health flag warning visible if flagged

PAGE TEST U-P6: health-analytics.html
  â–¡ Page loads without console errors
  â–¡ Charts render (not blank)
  â–¡ Data is REAL (not random)
  â–¡ Place 3 more orders then refresh:
      Calorie numbers change
  â–¡ Date filter works
  â–¡ Risk section shows user's conditions
  â–¡ Prediction section gives real advice

PAGE TEST U-P7: health-assistant.html (Chatbot)
  â–¡ Page loads without console errors
  â–¡ Chat input works
  â–¡ Send button works
  â–¡ Type "what should I eat":
      Gets food recommendations
      Recommendations are from DB
  â–¡ Type "is chocolate cake safe":
      Warns about sugar (diabetic user)
  â–¡ "Order This" button on recommendation:
      Logs action as 'accepted'
      Check AiRecommendationLog in DB
  â–¡ Long conversation history maintained
  â–¡ Loading indicator during response

PAGE TEST U-P8: forgot-password.html
  â–¡ Page loads without console errors
  â–¡ Email input works
  â–¡ Submit triggers reset flow
  â–¡ Shows success message

â”€â”€ ADMIN FRONTEND PAGES â”€â”€

For each admin page:
  Login as SUPER_ADMIN first
  Verify admin_token in localStorage
  Then test the page

PAGE TEST A-P1: dashboard.html
  â–¡ Page loads without console errors
  â–¡ All 4 KPI cards show numbers
  â–¡ KPI card numbers match API response
  â–¡ Change badges show % correctly
  â–¡ Orders by Hour chart renders
  â–¡ Current hour bar is highlighted
  â–¡ Average line drawn on chart
  â–¡ Sales chart renders
  â–¡ Period pills (7D/30D/90D) work:
      Click 30D â†’ chart updates
      Click 90D â†’ chart updates
      KPI cards DO NOT reload
  â–¡ Top Items table shows 5 items
  â–¡ Rank badges: gold/silver/bronze
  â–¡ Progress bars show correct width
  â–¡ Alerts panel shows real alerts
  â–¡ Auto-refresh every 5 minutes

PAGE TEST A-P2: food-management.html
  â–¡ Page loads without console errors
  â–¡ All 30+ foods show in table
  â–¡ Search filter works
  â–¡ Category filter works
  â–¡ Both filters together work (AND)
  â–¡ "Add Food" button:
      Opens modal with empty form
      Required field validation works
      Image URL preview works
      Save creates food in DB
      New food appears in table
      Count increments
  â–¡ Edit pencil icon:
      Opens modal PRE-FILLED
      Can change any field
      Save updates only that row
  â–¡ Availability toggle:
      Toggle OFF â†’ status badge changes
      User menu no longer shows item
      Toggle back ON â†’ item returns
  â–¡ Delete icon:
      Shows confirmation modal with food name
      Cancel = nothing happens
      Confirm = row fades out + removed
  â–¡ Cannot delete food with pending orders:
      Shows error message

PAGE TEST A-P3: inventory.html
  â–¡ Page loads without console errors
  â–¡ Summary cards show correct counts
  â–¡ Table sorted: out of stock first
  â–¡ Status badges correct colors
  â–¡ Click Low Stock card:
      Table filters to low stock items
  â–¡ Pencil icon â†’ inline edit:
      Input pre-filled
      Type -5 â†’ shake animation + error
      Type 0 â†’ saves, status = Out of Stock
      Type 50 â†’ saves, status = Healthy
      Row flashes green on success
      Summary strip recalculates
      NO extra API call for summary
  â–¡ Cancel button reverts change

PAGE TEST A-P4: orders.html
  â–¡ Page loads without console errors
  â–¡ Summary strip shows 4 counts
  â–¡ All orders appear in table
  â–¡ Tab bar works:
      Pending tab â†’ only pending shown
      New API call on each tab click
  â–¡ Expand chevron:
      Shows item breakdown
      Shows health flags
      One row at a time
  â–¡ Status dropdown:
      Shows correct options per status
      Selecting "Complete" opens modal
      Confirm â†’ status changes in table
      Summary counts update
      Tab counts update
      If on Pending tab: row disappears
  â–¡ Date filter works (client-side)
  â–¡ Search filter works (client-side)

PAGE TEST A-P5: users.html
  â–¡ Page loads without console errors
  â–¡ Summary cards correct
  â–¡ Test user appears in table
  â–¡ Conditions show in row
  â–¡ Risk badge correct color
  â–¡ Eye icon â†’ health modal:
      Risk ring animates
      Conditions as colored pills
      AI insights show
  â–¡ Deactivate button â†’ popover:
      Confirm deactivates user
      Row gets line-through + opacity
      Button changes to Reactivate
      Summary counts update
  â–¡ Cannot deactivate yourself
  â–¡ Role change (SUPER_ADMIN only):
      Role cards show correctly
      Warning for SUPER_ADMIN role
      Save changes role in table

PAGE TEST A-P6: analytics.html
  â–¡ Page loads without console errors
  â–¡ All 4 KPI cards load
  â–¡ Date preset buttons work:
      Click 7D â†’ all charts update
      Click 30D â†’ all charts update
  â–¡ Revenue chart renders (line + bars)
  â–¡ Internal period pills on revenue chart
      work independently of global filter
  â–¡ Revenue by Category doughnut:
      All 5 categories always shown
      Center shows total
  â–¡ Popular Foods horizontal bar renders
  â–¡ Category Heatmap:
      Renders as CSS GRID not chart
      7 columns, 5 rows
      Color intensity varies
  â–¡ Disease Distribution doughnut:
      Diabetes appears
      Hypertension appears
  â–¡ Risk Trends area chart renders
  â–¡ Peak Hours bar chart:
      24 bars always present
  â–¡ Top Spenders list shows
  â–¡ AI Impact stats show real rates

PAGE TEST A-P7: ai-monitoring.html
  â–¡ Page loads without console errors
  â–¡ Status bar shows correct status
  â–¡ Pulsing dot animation works
  â–¡ 4 metric cards show
  â–¡ Progress bars animate on load
  â–¡ Feature Importance chart renders
  â–¡ Accuracy Trend chart renders:
      Reference line at 85%
  â–¡ Recommendation Logs table:
      Shows real logs
      Search filter works
      Risk filter works
      Pagination works
  â–¡ Training History table shows
  â–¡ Retrain button (SUPER_ADMIN only):
      Confirmation modal opens
      Clicking Confirm:
        Modal closes
        Status â†’ Retraining + spinner
        Button disabled
        Polls every 10 seconds
        After ~35s: status â†’ Active
        Metrics update
        Success toast appears

PAGE TEST A-P8: reports.html
  â–¡ Page loads without console errors
  â–¡ 3 report cards visible
  â–¡ Click "Configure Sales Report":
      Config panel expands
      Other panels stay closed
  â–¡ Date preset buttons work
  â–¡ Preview button:
      Shows first 10 rows
      Shows row count
  â–¡ CSV download:
      Button shows "Preparing..."
      File downloads automatically
      File opens correctly
  â–¡ PDF download:
      File downloads automatically
      PDF has title + table
  â–¡ Recent Exports log:
      Downloaded file appears
      "Download Again" works
  â–¡ Anonymize toggle on health report:
      Names show as "Anonymous"

PAGE TEST A-P9: audit-logs.html
  â–¡ Page loads without console errors
  â–¡ Summary cards correct
  â–¡ Admin dropdown populated
  â–¡ Logs table shows all actions
  â–¡ Search input (400ms debounce):
      Type "food" â†’ filters instantly
      Rapid typing â†’ only 1 API call
  â–¡ Action type filter works
  â–¡ Target table filter works
  â–¡ Date range filter works
  â–¡ Filter pills appear per filter
  â–¡ Click âœ• on pill â†’ filter removed
  â–¡ Clear All â†’ all filters reset
  â–¡ Expand chevron â†’ JSON viewer:
      Keys in cyan
      Strings in green
      Numbers in amber
      Copy button works
  â–¡ For UPDATE actions:
      Before/After panels show
      Changed fields highlighted
  â–¡ Pagination works correctly
  â–¡ Per-page selector works
  â–¡ Auto-refresh toggle works:
      Counter counts up
      After 30s table refreshes

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECTION 3 â€” INTEGRATION TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

INTEGRATION TEST 1 â€” Full User Journey:
  â–¡ Register â†’ Login â†’ Set Profile
  â–¡ Browse intelligent menu
  â–¡ Place order with 3 items
  â–¡ View order history â†’ order appears
  â–¡ Open admin Orders â†’ same order appears
  â–¡ Admin completes order
  â–¡ User refreshes history â†’ shows Completed
  RESULT: âœ… PASS or âŒ FAIL

INTEGRATION TEST 2 â€” Food Availability Sync:
  â–¡ Admin marks food X as unavailable
  â–¡ User opens menu â†’ food X gone
  â–¡ Admin marks food X as available
  â–¡ User opens menu â†’ food X back
  RESULT: âœ… PASS or âŒ FAIL

INTEGRATION TEST 3 â€” Stock Real-Time:
  â–¡ Check current stock of food Y in admin
  â–¡ User orders 3 of food Y
  â–¡ Admin refreshes inventory
  â–¡ Stock reduced by exactly 3
  RESULT: âœ… PASS or âŒ FAIL

INTEGRATION TEST 4 â€” Health Data Flow:
  â–¡ User has conditions: Diabetes
  â–¡ Admin opens Analytics â†’ Disease chart
  â–¡ Diabetes count > 0
  â–¡ Admin opens Users â†’ user shows risk level
  RESULT: âœ… PASS or âŒ FAIL

INTEGRATION TEST 5 â€” Audit Trail Complete:
  â–¡ Perform: add food, edit food, delete food,
      change order status, deactivate user
  â–¡ Open Audit Logs
  â–¡ All 5 actions appear
  â–¡ All have correct action types
  â–¡ All have admin name + IP + timestamp
  RESULT: âœ… PASS or âŒ FAIL

INTEGRATION TEST 6 â€” AI Recommendation Flow:
  â–¡ User opens menu (recommendations logged)
  â–¡ Admin opens AI Monitoring â†’ Logs
  â–¡ Entries appear for this user
  â–¡ User accepts a recommendation via chatbot
  â–¡ Acceptance rate updates in admin
  RESULT: âœ… PASS or âŒ FAIL

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECTION 4 â€” RBAC SECURITY TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Login as ANALYST, test these are BLOCKED:
  â–¡ POST /api/admin/foods â†’ 403
  â–¡ PUT  /api/admin/foods/{id} â†’ 403
  â–¡ PUT  /api/admin/inventory/{id} â†’ 403
  â–¡ PUT  /api/admin/orders/{id}/status â†’ 403
  â–¡ PUT  /api/admin/users/{id} â†’ 403
  â–¡ POST /api/admin/ai/retrain â†’ 403

Login as ANALYST, test these are ALLOWED:
  â–¡ GET /api/admin/overview â†’ 200
  â–¡ GET /api/admin/foods â†’ 200
  â–¡ GET /api/admin/orders â†’ 200
  â–¡ GET /api/admin/analytics/summary â†’ 200
  â–¡ GET /api/admin/audit â†’ 200

Login as MANAGER, test these are BLOCKED:
  â–¡ POST /api/admin/ai/retrain â†’ 403
  â–¡ PUT  /api/admin/users/{id} (role change) â†’ 403

Login as MANAGER, test these are ALLOWED:
  â–¡ POST /api/admin/foods â†’ 201
  â–¡ PUT  /api/admin/orders/{id}/status â†’ 200

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECTION 5 â€” EDGE CASE TESTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EDGE CASE 1 â€” Empty States:
  â–¡ User with no orders â†’ orders page
      shows "No orders yet" (not blank/crash)
  â–¡ Admin analytics with no data in range
      â†’ charts show empty state (not crash)
  â–¡ Admin audit with no logs
      â†’ shows "No logs found" (not blank)

EDGE CASE 2 â€” Invalid Tokens:
  â–¡ Corrupted token â†’ 401 returned
  â–¡ Expired token â†’ 401 returned
  â–¡ Missing token â†’ 401 returned
  â–¡ User token on admin endpoint â†’ 403

EDGE CASE 3 â€” Data Limits:
  â–¡ Order with qty=0 â†’ rejected
  â–¡ Food name 200 chars â†’ truncated or rejected
  â–¡ Inventory stock = 0 â†’ user cannot order it
  â–¡ All foods unavailable â†’ user menu empty state

EDGE CASE 4 â€” Concurrent Actions:
  â–¡ User orders last item in stock (qty=1)
  â–¡ Stock goes to 0
  â–¡ Same user tries to order again â†’ blocked
  â–¡ Admin inventory shows 0

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SECTION 6 â€” TEST REPORT FORMAT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

After running all tests, produce this report:

HEALTHBITE TEST REPORT
======================
Date: [today]
Tester: [name]

SUMMARY:
  Total Tests:   [N]
  Passed:        [N] âœ…
  Failed:        [N] âŒ
  Skipped:       [N] â­ï¸

FAILED TESTS:
  [TEST ID] | [Expected] | [Got] | [Error]
  Example:
  U-MENU-2  | 200        | 500   | KeyError 'food_id'
  A-FOOD-3  | 201        | 422   | Validation error

CRITICAL FAILURES (blockers):
  List any test failures that prevent
  other tests from running

WARNINGS (non-blocking):
  List any tests that pass but with
  unexpected behavior

INTEGRATION STATUS:
  Test 1: âœ… / âŒ
  Test 2: âœ… / âŒ
  Test 3: âœ… / âŒ
  Test 4: âœ… / âŒ
  Test 5: âœ… / âŒ
  Test 6: âœ… / âŒ

OVERALL STATUS:
  â–¡ READY FOR PRODUCTION
  â–¡ NEEDS FIXES (list below)
  â–¡ CRITICAL ISSUES (stop + fix)